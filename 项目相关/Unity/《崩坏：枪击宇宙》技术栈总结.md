# 《崩坏：枪击宇宙》米游二创技术栈总结

配合B站演示视频食用更佳~ 作品集链接：

本项目开源在了Github上：[YYHHOrganization/GameDemo2024: This is a repository for our major game development in 2024.](https://github.com/YYHHOrganization/GameDemo2024)



# 一、整体项目介绍

## 1.项目背景

- 该项目是一年前制作的项目，由**两个人**来完成策划、程序和美术相关的工作。工作流基于本科实习期学习到的知识，在研究生的科研空余时间的晚上进行制作，一共做了半年左右。

- 部分美术素材来源于米游，模型来自于二创社区和Unity免费商城中的库（由于时间依旧有限，美术素材有些欠缺，各种模型复用情况有点严重），跟宠系统和部分道具则是自己建模，游戏中的大部分shader和美术效果都是自己跟了教程之后实现进去的。程序方面，除了Dotween，Cinemachine这些家喻户晓的常见package以外，框架层面都是自己实现的（比如UI，状态机，剧情和任务系统这种，后面也会发现框架的鲁棒性有所欠缺，但也算能让我们顺利做完了这个项目，毕竟自己做的框架），策划方面则是我们两个人自己讨论，实现并填表的，平衡性不能保证:smiley:；

- 该项目是投入时间最久的Unity项目，虽然里面的许多技术在后面的游戏项目中有更新迭代，不过我们仍然觉得这个项目是比较有代表性的，因此总结一下本项目的技术栈。

- 该项目有参与厦门大学游创社的开放日活动，以及吉比特的开放日活动，有数十位玩家体验过该游戏，给我们提供了宝贵的意见，同时也触发了一些bug（误），当然我们有进行修复！！

  > 我们比较喜欢玩米家的游戏，本游戏可选角色有一部分星穹铁道和原神的角色，游戏里还有不少的米家全家桶的彩蛋（原神，铁道，绝区零，未定，崩坏三，崩二没时间玩所以没放进来hhh）



## 2.游戏类型

3D肉鸽枪战游戏，游戏设计的可玩通关时长（中间不失败的情况下）大概是半个小时左右，肉鸽游戏共计五层，有上百种不同的道具，十几种敌人，2种boss（时间、产能有限），有道具房、商城、宝箱房、挑战房、怪物房和boss房。玩家的武器是一把小手枪，拥有攻速、攻击距离、移速、伤害值、血量、护盾等多种属性，可以组合各种道具打出不同的组合效果。





# 二、项目的技术栈

## 1.框架与系统层面

> 无特殊说明都是自己搭建的系统，不过参考了不少教程，理解后自行进行搭建和扩展的，在这里也感谢游戏行业大佬们的博客、开源项目的指导，在学习过程中也是受益匪浅！

- 自己的UI框架；
- 肉鸽游戏的背包系统；
- 自己的事件系统；
- 角色和敌人的状态机，boss的行为树使用的Unity著名插件（有做节点的扩展）；
- 剧情系统与任务系统，前端采用XNode和后面部分升级的NodeCanvas做流程图功能，用作剧情系统和任务流的可视化。
- 音效系统，后处理系统；
- 肉鸽道具系统
- 扩展Unity的timeline系统（自定义部分轨道节点）
- 资源加载系统（Addressable实现美术资源热更，代码层的话该项目在一开始没有架好热更系统，后面就不太好加进来了，所以没有实现热更）
- 策划表转表工具相关；
- GM窗口；
- 随机房间、道具管理系统，宠物模块；
- 抽卡系统
- 天气系统，有下雨和雷电，起雾效果，配合致敬《原神》的部分元素反应系统。



## 2.一些技术点介绍

> 这部分介绍一些项目中的技术点（除了上文框架系统层面的），标粗的一些技术是在实现上耗时较多的功能点，在这里也是记录一下。

- **类似《塞尔达传说：王国之泪》的简易时间回溯功能**；
- 较为复杂的角色状态机、动画分层Layer；
- **草地渲染与剔除**
- **结合自己写的Maya插件+Unity移植，游戏中的部分破碎效果**；
- **随机房间生成，随机道具和敌人配置的功能；**
- 沙地脚印效果
- 地面反射SSPR
- **鱼群模拟**
- 场景中的体积雾
- 其他渲染相关：水体渲染、Caustics、假室内、角色渲染本身、stipple transparency，一些后处理效果，**流体模拟效果，一些自定义RenderFeature**
- **类似希儿秘技的半透明效果**
- 部分特效：如护盾、激光、冰刺、shockwave等
- 音游的相关玩法；
- 致敬《星穹铁道》的枘凿六合魔方玩法，拼图玩法；